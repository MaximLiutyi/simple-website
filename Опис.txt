Цей файл deploy.yml (.GitHub/workflow) налаштовує автоматизацію:

При пуші в main запускається workflow.
На машині з Ubuntu:
Завантажується ваш код із репозиторію.
Виконується логін у Docker Hub з вашими credentials (секретами).
Будується Docker-образ із вашим кодом.
Образ відправляється на Docker Hub.

Далі відбувається логування на ec2 інстенс
Зупинка та видалення старого контейнера якщо такий є
пул створеного в минилому крокі контейнера з докерхабу і його запуск